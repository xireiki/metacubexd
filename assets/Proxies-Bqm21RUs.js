import{ap as ke,o as Pe,aq as Oe,ar as Be,as as he,L as Ae,at as He,A as ie,N as Re,u as ne,d as e,au as je,i as l,ac as I,av as Fe,aw as We,D as w,ax as ze,ay as Ye,F as A,az as Ke,aA as Ve,aB as Qe,aC as Xe,aD as Y,aE as Ze,aF as qe,g as y,aG as Je,aH as Ge,aI as et,aJ as ae,aK as Se,aL as Te,aM as te,aN as re,aO as ce,Q as tt,t as m,aP as rt,aQ as me,S as P,aR as M,aS as Ne,aT as de,a0 as K,$ as Le,aa as Ue,H as oe,E as nt,W as st,aU as lt,K as it,b as at,y as ct,R as ot,T as dt,B as q,a3 as ut,aV as gt,aW as fe,aX as vt,aY as be,aZ as xe,m as ht}from"./index-CnPdl4-v.js";import{D as mt}from"./DocumentTitle-B5juNon7.js";import{f as ft}from"./time-EKV9HnXH.js";import{I as pe}from"./IconReload-Djf-qvc6.js";function ye(s){const r={...s},n={...s},i={},u=a=>{let h=i[a];if(!h){if(!He())return r[a];i[a]=h=ie(r[a],{internal:!0}),delete r[a]}return h[0]()};for(const a in s)Object.defineProperty(n,a,{get:()=>u(a),enumerable:!0});const c=(a,h)=>{const o=i[a];if(o)return o[1](h);a in r&&(r[a]=he(h,[r[a]]))};return[n,(a,h)=>{if(Oe(a)){const o=Be(()=>Object.entries(he(a,n)));Ae(()=>{for(const[S,x]of o)c(S,()=>x)})}else c(a,h);return n}]}function bt(s,r){if(ke.context){const[n,i]=ye(s);return Pe(()=>i(r())),[n,i]}return ye(r())}/**
 * @license @tabler/icons-solidjs v3.22.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var we=Re("outline","brand-speedtest","IconBrandSpeedtest",[["path",{d:"M5.636 19.364a9 9 0 1 1 12.728 0"}],["path",{d:"M16 9l-4 4"}]]),xt=m('<div class="flex flex-col gap-4"><div><div class="flex w-full justify-center"><input class=toggle type=checkbox></div></div><div class="flex flex-col"><input class="input input-bordered w-full"></div><div><input type=number class="input input-bordered w-full"></div><div><select class="select select-bordered w-full"></select></div><div><div class="flex w-full justify-center"><input class=toggle type=checkbox></div></div><div><div class="flex w-full justify-center"><input class=toggle type=checkbox></div></div><div><select class="select select-bordered w-full"></select></div><div><input type=number class="input input-bordered w-full"><input type=number class="input input-bordered w-full">'),pt=m('<option class="flex items-center gap-2">'),yt=m("<option>");const wt=s=>{const[r]=ne();return e(tt,{ref:n=>{var i;return(i=s.ref)==null?void 0:i.call(s,n)},get icon(){return e(je,{size:24})},get title(){return r("proxiesSettings")},get children(){var n=xt(),i=n.firstChild,u=i.firstChild,c=u.firstChild,a=i.nextSibling,h=a.firstChild,o=a.nextSibling,S=o.firstChild,x=o.nextSibling,$=x.firstChild,T=x.nextSibling,k=T.firstChild,p=k.firstChild,N=T.nextSibling,O=N.firstChild,_=O.firstChild,U=N.nextSibling,H=U.firstChild,V=U.nextSibling,F=V.firstChild,Q=F.nextSibling;return l(i,e(I,{withDivider:!0,get children(){return r("autoCloseConns")}}),u),c.addEventListener("change",v=>Fe(v.target.checked)),l(a,e(I,{withDivider:!0,get children(){return r("urlForLatencyTest")}}),h),h.addEventListener("change",v=>We(v.target.value)),l(o,e(I,{withDivider:!0,get children(){return[w(()=>r("latencyTestTimeoutDuration"))," (",w(()=>r("ms")),")"]}}),S),S.addEventListener("change",v=>ze(Number(v.target.value))),l(x,e(I,{withDivider:!0,get children(){return r("proxiesSorting")}}),$),$.addEventListener("change",v=>Ye(v.target.value)),l($,e(A,{get each(){return Object.values(Ke)},children:v=>(()=>{var E=pt();return E.value=v,l(E,()=>r(v)),E})()})),l(T,e(I,{withDivider:!0,get children(){return r("hideUnavailableProxies")}}),k),p.addEventListener("change",v=>Ve(v.target.checked)),l(N,e(I,{withDivider:!0,get children(){return r("renderInTwoColumns")}}),O),_.addEventListener("change",v=>Qe(v.target.checked)),l(U,e(I,{withDivider:!0,get children(){return r("proxiesPreviewType")}}),H),H.addEventListener("change",v=>Xe(v.target.value)),l(H,e(A,{get each(){return Object.values(Y)},children:v=>(()=>{var E=yt();return E.value=v,l(E,()=>r(v)),E})()})),l(V,e(I,{withDivider:!0,get children(){return r("iconHeight")}}),F),F.addEventListener("change",v=>Ze(Number(v.target.value))),l(V,e(I,{withDivider:!0,get children(){return r("iconMarginRight")}}),Q),Q.addEventListener("change",v=>qe(Number(v.target.value))),y(()=>c.checked=Je()),y(()=>h.value=Ge()),y(()=>S.value=et()),y(()=>$.value=ae()),y(()=>p.checked=Se()),y(()=>_.checked=Te()),y(()=>H.value=te()),y(()=>F.value=re()),y(()=>Q.value=ce()),n}})},$e=s=>{const r=()=>te()===Y.OFF,n=w(()=>s.proxyNameList.length<=10),i=w(()=>{const c=te();return c===Y.BAR||c===Y.Auto&&!n()}),u=w(()=>{const c=te();return c===Y.DOTS||c===Y.Auto&&n()});return e(P,{get when(){return!r()},get children(){return e(rt,{get children(){return[e(me,{get when(){return i()},get children(){return e(_t,{get proxyNameList(){return s.proxyNameList},get testUrl(){return s.testUrl},get now(){return s.now}})}}),e(me,{get when(){return u()},get children(){return e(Tt,{get proxyNameList(){return s.proxyNameList},get testUrl(){return s.testUrl},get now(){return s.now}})}})]}})}})};var $t=m('<div class="flex items-center gap-2 py-2"><div class="my-1 flex flex-1 items-center justify-center overflow-hidden rounded-2xl [&amp;>*]:h-2"><div class=bg-success></div><div class=bg-warning></div><div class=bg-error></div><div class=bg-neutral>');const _t=s=>{const{getLatencyByName:r}=de(),n=w(()=>s.proxyNameList.map(o=>r(o,s.testUrl))),i=w(()=>n().length),u=w(()=>n().filter(o=>o>M().NOT_CONNECTED&&o<=M().MEDIUM).length),c=w(()=>n().filter(o=>o>M().MEDIUM&&o<=M().HIGH).length),a=w(()=>n().filter(o=>o>M().HIGH).length),h=w(()=>n().filter(o=>o===M().NOT_CONNECTED).length);return(()=>{var o=$t(),S=o.firstChild,x=S.firstChild,$=x.nextSibling,T=$.nextSibling,k=T.nextSibling;return l(o,e(P,{get when(){return s.now},get children(){return e(Ne,{get proxyName(){return s.now},get testUrl(){return s.testUrl}})}}),null),y(p=>{var N=`${u()*100/i()}%`,O=`${c()*100/i()}%`,_=`${a()*100/i()}%`,U=`${h()*100/i()}%`;return N!==p.e&&((p.e=N)!=null?x.style.setProperty("width",N):x.style.removeProperty("width")),O!==p.t&&((p.t=O)!=null?$.style.setProperty("width",O):$.style.removeProperty("width")),_!==p.a&&((p.a=_)!=null?T.style.setProperty("width",_):T.style.removeProperty("width")),U!==p.o&&((p.o=U)!=null?k.style.setProperty("width",U):k.style.removeProperty("width")),p},{e:void 0,t:void 0,a:void 0,o:void 0}),o})()};var Ct=m("<div>"),Pt=m('<div class="flex items-center gap-2 py-2"><div class="flex flex-1 flex-wrap items-center gap-1">');const St=s=>{let r=s.selected?"bg-white border-4 border-success":"bg-success";return typeof s.latency!="number"||s.latency===M().NOT_CONNECTED?r=s.selected?"bg-white border-4 border-neutral":"bg-neutral":s.latency>M().HIGH?r=s.selected?"bg-white border-4 border-error":"bg-error":s.latency>M().MEDIUM&&(r=s.selected?"bg-white border-4 border-warning":"bg-warning"),(()=>{var n=Ct();return y(i=>{var u=K("h-4 w-4 rounded-full",r),c=s.name;return u!==i.e&&Le(n,i.e=u),c!==i.t&&Ue(n,"title",i.t=c),i},{e:void 0,t:void 0}),n})()},Tt=s=>{const{getLatencyByName:r}=de();return(()=>{var n=Pt(),i=n.firstChild;return l(i,e(A,{get each(){return s.proxyNameList.map(u=>[u,r(u,s.testUrl)])},children:([u,c])=>e(St,{name:u,latency:c,get selected(){return s.now===u}})})),l(n,e(P,{get when(){return s.now},get children(){return e(Ne,{get proxyName(){return s.now},get testUrl(){return s.testUrl}})}}),null),n})()};var Nt=m("<progress class=progress max=100>"),Lt=m('<div class="text-sm text-slate-500"> / <!> ( <!>% )'),Ut=m('<div class="text-sm text-slate-500">: ');const Et=s=>{const{Download:r=0,Upload:n=0,Total:i=0,Expire:u=0}=s,c=oe(i,{units:"iec"}),a=oe(r+n,{units:"iec"}),h=nt.toFinite(((r+n)/i*100).toFixed(2));return{total:c,used:a,percentage:h,expirePrefix:()=>{const[x]=ne();return x("expire")},expireStr:()=>{const[x]=ne();return u===0?x("noExpire"):st(u*1e3).format("YYYY-MM-DD")}}},Dt=s=>{if(!s.subscriptionInfo)return;const r=Et(s.subscriptionInfo);return[(()=>{var n=Nt();return y(()=>n.value=r.percentage),n})(),(()=>{var n=Lt(),i=n.firstChild,u=i.nextSibling,c=u.nextSibling,a=c.nextSibling;return a.nextSibling,l(n,()=>`${r.used}`,i),l(n,()=>`${r.total}`,u),l(n,()=>r.percentage,a),n})(),(()=>{var n=Ut(),i=n.firstChild;return l(n,()=>r.expirePrefix(),i),l(n,()=>r.expireStr(),null),n})()]};var It={width:0,height:0};function _e(){return{width:window.innerWidth,height:window.innerHeight}}function Mt(){const[s,r]=bt(It,_e);return lt(window,"resize",()=>r(_e())),s}var kt=m("<div class=mb-2>"),Ot=m('<div class="flex gap-2"><div class=flex-1></div><div class=flex-1>'),Bt=m('<div class="grid grid-cols-1 place-items-start gap-2">');const Ce=s=>{const r=Mt(),n=w(()=>r.width>480);return()=>{const i=it(()=>s.children),u=c=>{var a;return(a=i())==null?void 0:a.filter((h,o)=>o%2===c).map(h=>(()=>{var o=kt();return l(o,h),o})())};return Te()&&n()?(()=>{var c=Ot(),a=c.firstChild,h=a.nextSibling;return l(a,()=>u(0)),l(h,()=>u(1)),c})():(()=>{var c=Bt();return l(c,i),c})()}};var At=m('<div class="flex h-full flex-col gap-2"><div class="flex items-center gap-2"><div class="tabs-boxed tabs gap-2"></div><div class=ml-auto></div></div><div class="flex-1 overflow-y-auto">'),Ht=m('<button><span></span><div class="badge badge-sm">'),Rt=m("<div>"),jt=m("<span class=whitespace-nowrap>&nbsp;::&nbsp;"),Ft=m('<div class=space-y-2><div class="flex items-center justify-between pr-8"><div class="flex items-center"><span></span><div class="badge badge-sm ml-2"></div></div></div><div class="flex flex-wrap items-center justify-between gap-2"><div class="badge badge-primary badge-sm"><span class=font-bold></span></div><div class="badge badge-secondary badge-sm">/s'),Wt=m("<img>"),zt=m('<div class="flex items-center justify-between pr-8"><div class="flex items-center gap-2"><span></span><div class="badge badge-sm"></div></div><div class="flex items-center gap-2">'),Yt=m('<div class="text-sm text-slate-500"> :: <!> ');const Zt=()=>{const s=at();if(!ct())return s("/setup",{replace:!0}),null;let r;const[n]=ne(),{fetchProxies:i,proxies:u,selectProxyInGroup:c,proxyProviders:a,updateProviderByProviderName:h,updateAllProvider:o,proxyGroupLatencyTest:S,proxyProviderLatencyTest:x,proxyGroupLatencyTestingMap:$,proxyProviderLatencyTestingMap:T,isAllProviderUpdating:k,updatingMap:p}=de(),N=w(()=>u().filter(f=>!f.hidden)),{speedGroupByName:O}=ot(),[_,U]=dt(ie({}),{name:"collapsedMap",storage:localStorage}),H=(f,C)=>{U(G=>({...G,[f]:C}))};Pe(i);const V=async(f,C)=>{f.stopPropagation(),S(C)},F=f=>f.replace("<svg",~f.indexOf("xmlns")?"<svg":'<svg xmlns="http://www.w3.org/2000/svg"').replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/\{/g,"%7B").replace(/\}/g,"%7D").replace(/</g,"%3C").replace(/>/g,"%3E"),Q=(f,C)=>{f.stopPropagation(),x(C)},v=(f,C)=>{f.stopPropagation(),h(C)},E=async f=>{f.stopPropagation(),o()},[J,Ee]=ie("proxies"),De=()=>[{type:"proxies",name:n("proxies"),count:N().length},{type:"proxyProviders",name:n("proxyProviders"),count:a().length}];return[e(mt,{get children(){return n("proxies")}}),(()=>{var f=At(),C=f.firstChild,G=C.firstChild,ue=G.nextSibling,ge=C.nextSibling;return l(G,e(A,{get each(){return De()},children:t=>(()=>{var L=Ht(),W=L.firstChild,g=W.nextSibling;return L.$$click=()=>Ee(t.type),l(W,()=>t.name),l(g,()=>t.count),y(()=>Le(L,K(J()===t.type&&"tab-active","tab-sm sm:tab-md tab gap-2 px-2"))),L})()})),l(C,e(P,{get when(){return J()==="proxyProviders"},get children(){return e(q,{class:"btn btn-circle btn-sm",get disabled(){return k()},onClick:t=>E(t),get icon(){return e(pe,{get class(){return K(k()&&"animate-spin text-success")}})}})}}),ue),l(ue,e(q,{class:"btn-circle btn-primary btn-sm",onClick:()=>r==null?void 0:r.showModal(),get icon(){return e(ut,{})}})),l(ge,e(P,{get when(){return J()==="proxies"},get children(){return e(Ce,{get children(){return e(A,{get each(){return N()},children:t=>{const L=w(()=>gt({proxyNames:fe({proxyNames:t.all??[],orderingType:ae(),testUrl:t.testUrl||null}),enabled:Se(),testUrl:t.testUrl||null})),W=(()=>{var g=Ft(),D=g.firstChild,B=D.firstChild,X=B.firstChild,ee=X.nextSibling,Z=D.nextSibling,se=Z.firstChild,Ie=se.firstChild,ve=se.nextSibling,Me=ve.firstChild;return l(B,e(P,{get when(){return t.icon},get children(){return e(P,{get when(){return t.icon.startsWith("data:image/svg+xml")},get fallback(){return(()=>{var d=Wt();return y(b=>{var z=t.icon,R=`${re()}px`,j=`${ce()}px`;return z!==b.e&&Ue(d,"src",b.e=z),R!==b.t&&((b.t=R)!=null?d.style.setProperty("height",R):d.style.removeProperty("height")),j!==b.a&&((b.a=j)!=null?d.style.setProperty("margin-right",j):d.style.removeProperty("margin-right")),b},{e:void 0,t:void 0,a:void 0}),d})()},get children(){var d=Rt();return d.style.setProperty("color","oklch(var(--p) / var(--tw-bg-opacity))"),d.style.setProperty("background-color","currentColor"),d.style.setProperty("mask-size","100% 100%"),y(b=>{var z=`${re()}px`,R=`${re()}px`,j=`${ce()}px`,le=`url("${F(t.icon)}")`;return z!==b.e&&((b.e=z)!=null?d.style.setProperty("height",z):d.style.removeProperty("height")),R!==b.t&&((b.t=R)!=null?d.style.setProperty("width",R):d.style.removeProperty("width")),j!==b.a&&((b.a=j)!=null?d.style.setProperty("margin-right",j):d.style.removeProperty("margin-right")),le!==b.o&&((b.o=le)!=null?d.style.setProperty("mask-image",le):d.style.removeProperty("mask-image")),b},{e:void 0,t:void 0,a:void 0,o:void 0}),d}})}}),X),l(X,()=>t.name),l(ee,()=>{var d;return(d=t.all)==null?void 0:d.length}),l(D,e(q,{class:"btn-circle btn-sm",get disabled(){return $()[t.name]},onClick:d=>V(d,t.name),get icon(){return e(we,{get class(){return K($()[t.name]&&"animate-pulse text-success")}})}}),null),l(Ie,()=>vt(t.type)),l(se,e(P,{get when(){var d;return((d=t.now)==null?void 0:d.length)>0},get children(){var d=jt();return d.firstChild,l(d,()=>t.now,null),d}}),null),l(ve,()=>oe(O()[t.name]??0).toString(),Me),l(g,e(P,{get when(){return!_()[t.name]},get children(){return e($e,{get proxyNameList(){return L()},get now(){return t.now},get testUrl(){return t.testUrl||null}})}}),null),g})();return e(be,{get isOpen(){return _()[t.name]},title:W,onCollapse:g=>H(t.name,g),get children(){return e(A,{get each(){return L()},children:g=>e(xe,{proxyName:g,get testUrl(){return t.testUrl||null},get timeout(){return t.timeout??null},get isSelected(){return t.now===g},onClick:()=>void c(t,g)})})}})}})}})}}),null),l(ge,e(P,{get when(){return J()==="proxyProviders"},get children(){return e(Ce,{get children(){return e(A,{get each(){return a()},children:t=>{const L=w(()=>fe({orderingType:ae(),proxyNames:t.proxies.map(g=>g.name)??[],testUrl:t.testUrl})),W=[(()=>{var g=zt(),D=g.firstChild,B=D.firstChild,X=B.nextSibling,ee=D.nextSibling;return l(B,()=>t.name),l(X,()=>t.proxies.length),l(ee,e(q,{class:"btn btn-circle btn-sm",get disabled(){return p()[t.name]},onClick:Z=>v(Z,t.name),get icon(){return e(pe,{get class(){return K(p()[t.name]&&"animate-spin text-success")}})}}),null),l(ee,e(q,{class:"btn btn-circle btn-sm",get disabled(){return T()[t.name]},onClick:Z=>Q(Z,t.name),get icon(){return e(we,{get class(){return K(T()[t.name]&&"animate-pulse text-success")}})}}),null),g})(),e(Dt,{get subscriptionInfo(){return t.subscriptionInfo}}),(()=>{var g=Yt(),D=g.firstChild,B=D.nextSibling;return B.nextSibling,l(g,()=>t.vehicleType,D),l(g,()=>n("updated"),B),l(g,()=>ft(t.updatedAt),null),g})(),e(P,{get when(){return!_()[t.name]},get children(){return e($e,{get proxyNameList(){return L()},get testUrl(){return t.testUrl}})}})];return e(be,{get isOpen(){return _()[t.name]},title:W,onCollapse:g=>H(t.name,g),get children(){return e(A,{get each(){return L()},children:g=>e(xe,{proxyName:g,get testUrl(){return t.testUrl},get timeout(){return t.timeout??null}})})}})}})}})}}),null),l(f,e(wt,{ref:t=>r=t}),null),f})()]};ht(["click"]);export{Zt as default};
